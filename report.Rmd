---
title: "R Notebook"
output: html_notebook
---
#prepare
```{r}
library(dplyr)
library(ggplot2)
```

#data access
```{r}
happiness <- read.csv("~/Downloads/happy2015/2015.csv")
terrorism <- read.csv("~/Downloads/happy2015/globalterrorismdb_0616dist.csv")
head(happiness)
head(terrorism)
```
#data wrangling
## Part I:data clean
```{r}
terrorismClean <-
  terrorism %>% 
  filter(iyear=="2015") %>%
  mutate(country = as.character(country_txt)) %>%
  select(iyear, country)

happinessClean <-
  happiness %>%
  mutate(country = as.character(Country)) %>%
  select(country, Happiness.Score)

terrorismClean
happinessClean

table2015 <-
  happinessClean %>%
  left_join(terrorismClean,by = "country") %>%
  group_by(country) %>%
  summarise(Happiness.Score=max(Happiness.Score),attackTimes = n()) %>%
  arrange(desc(attackTimes))
  
table2015
ggplot(data=table2015, aes(x=Happiness.Score,y=attackTimes))+geom_line()

```


